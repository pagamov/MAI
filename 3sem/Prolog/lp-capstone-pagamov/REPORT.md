# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Гамов П.А.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

## Введение

Опишите, какие знания и навыки вы получите в результате выполнения курсового проекта

## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: 3. `child(ребенок, родитель)`, `male(человек)`, `female(человек)`
 3. Реализовать предикат проверки/поиска (вариант 4.) двоюродного брата.
 4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве
 5. [На оценки хорошо и отлично] Реализовать естественно-языковый интерфейс к системе, позволяющий задавать вопросы относительно степеней родства, и получать осмысленные ответы.

## Получение родословного дерева

<!-- Опишите, как вы получили родословное дерево в формате GEDCOM, сколько в нем индивидуумов. -->

К счастью, мой родственник давно уже ведет дерево родословной. Если поглядеть на сайте, можно увидеть что дерево часто уходит до 6-ого поколения, также часто попадаются люди без фамилий, без имени, даты рождения, а также прочие случаи, так что итоговый файл, который я получил по почте спустя месяц ожиданий, оказался заполнен самым реалистичным образом.

## Конвертация родословного дерева

<!-- Опишите, какой язык/языки вы решили использовать для решения этой задачи и почему. Опишите принцип действия программы и приведите ключевые фрагменты
программы, позволяющие понять основные моменты решения. -->

Для конвертации родословной я использовал язык Python, так как в нем существует быстрая работа со строками и файлами.

Процесс я решил разбить на два этапа, сначала я принимаю файл с изначальной родословной, отдаю же я файл только с той информацией, которая мне нужна, а это имена, фамилии, даты рождения, пол, семьи, дети, связи.

Дальше новый файл уходит в второй обработчик, откуда я получаю готовые предикаты, заполненные именами и фамилиями, а также полами людей, все в соответствии с моим вариантом представления родословного дерева.

```python
if (state == 'person'):
    if (line.find('1 SEX') >= 0 or line.find('1 FAMS') >= 0 or line.find('1 FAMC') >= 0 or line.find('1 NAME') >= 0):
        out.write(line[:-1])
```

В зависимости от того где мы сейчас находимся в файле, мы ищем конктетные фрагменты, а найдя их, записываем в промежуточный файл.

```python
persons = {}
female = []
male = []
childs = []
parents = []
```

Вводим массивы людей по категориям, в дальнейшем мы из них будем вычленять людей одной семиьи для записи по предикатам.

```python
elif (line.find('0 @F') >= 0 or line.find('END') >= 0):
    if (state == 'family'):
        for parent in parents:
            for child in childs:
                if (persons[child] != '' and persons[parent] != ''):
                    familyres.append(persons[child] + ', ' + persons[parent])
        childs = []
        parents = []
    state = 'newfamily'
```

Примерно так выглядит схлопывание семьи, когда машина доходит до определенного момента, а именно считывает до конца семью, она начинает строить по заранее известным уникальным айди людей, дальше строить пары отношений и записывать в массив. Дальше эта информация попадет в логику предикатов.

## Предикат поиска родственника

<!-- Опишите, как устроен предикат поиска родственника, приведите его исходный код и примеры запросов/ответов (протокол работы). -->

<!-- ## Определение степени родства -->

<!-- Приведите описание метода решения, важные фрагменты исходного кода, протокол работы. -->

<!-- ## Естественно-языковый интерфейс -->

Предикат поиска двоюродного брата устроен очень просто - используя представление children/2() поднимаемся на два уровня выше, достигая дедушек и бабушек, дальше спускаемся на два уровня вниз, и смотрим чтобы данный человек был мужского пола с помощью предиката male/1().

Можно модифицировать данный предикат внеся его в bagof/3() для того чтобы найти двоюродных братьев без повторов, так как предикат ищет их как по мамам так и мамам.

## Выводы

<!-- Сформулируйте *содержательные* выводы по курсовому проекту в целом. Чему он вас научила?
Над чем заставила задуматься? Помните, что несодержательные выводы -
самая частая причина снижения оценки. -->

Python является отличным языком для написания парсеров, встроенная обработка строк и легкий синтаксис позволяет писать программы очень быстро.

Подводя итоги работы с Prolog, логичское программирование является специфическим способом писать некоторые задачи анализа текстов, состояний, нейронных сетей более эффективно, чем на остальных языках программирования.
